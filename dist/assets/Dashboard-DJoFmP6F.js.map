{"version":3,"file":"Dashboard-DJoFmP6F.js","sources":["../../src/components/Dashboard.ts"],"sourcesContent":["import { appStore } from '../stores/AppStore'\n\n/**\n * Dashboard component - Main landing page for authenticated users\n */\n\nexport async function renderDashboard(): Promise<void> {\n  const mainContent = document.getElementById('main-content')\n  if (!mainContent) return\n  \n  // Get real data from the store\n  const state = appStore.getState()\n  const stats = await appStore.getWritingStats()\n  const recentEntries = state.entries.slice(0, 3) // Get 3 most recent\n  \n  // Calculate today's word count\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  const todayEntries = state.entries.filter(entry => {\n    const entryDate = new Date(entry.createdAt)\n    entryDate.setHours(0, 0, 0, 0)\n    return entryDate.getTime() === today.getTime()\n  })\n  const todayWordCount = todayEntries.reduce((total, entry) => total + entry.wordCount, 0)\n  const dailyTarget = state.user?.preferences.dailyWordTarget || 250\n  const progressPercentage = Math.min((todayWordCount / dailyTarget) * 100, 100)\n  \n  mainContent.innerHTML = `\n    <div class=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n      <div class=\"mb-8\">\n        <h1 class=\"text-3xl font-display font-bold text-gray-900 dark:text-gray-100 animate-slide-up\">\n          Welcome back! 👋\n        </h1>\n        <p class=\"mt-2 text-gray-600 dark:text-gray-400 animate-fade-in\">\n          Ready to capture your thoughts today? ✨\n        </p>\n      </div>\n      \n      <!-- Quick Actions -->\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n        <a href=\"/write\" class=\"stat-card link-subtle\" data-action=\"new-entry\">\n          <div class=\"flex items-center\">\n            <div class=\"p-3 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900 dark:to-blue-800 rounded-xl group-hover:animate-bounce-gentle\">\n              <span class=\"text-3xl\">✍️</span>\n            </div>\n            <div class=\"ml-4\">\n              <h3 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\n                New Entry\n              </h3>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Start writing ✨</p>\n            </div>\n          </div>\n        </a>\n        \n        <div class=\"stat-card cursor-pointer\" data-action=\"view-streak\" title=\"View writing streak details\">\n          <div class=\"flex items-center\">\n            <div class=\"p-3 bg-gradient-to-br from-orange-100 to-red-200 dark:from-orange-900 dark:to-red-800 rounded-xl group-hover:animate-pulse-gentle\">\n              <span class=\"text-3xl\">🔥</span>\n            </div>\n            <div class=\"ml-4\">\n              <h3 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">${stats.currentStreak} Day Streak</h3>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Keep it up! 💪</p>\n            </div>\n          </div>\n        </div>\n        \n        <a href=\"/search\" class=\"stat-card link-subtle\" data-action=\"view-entries\">\n          <div class=\"flex items-center\">\n            <div class=\"p-3 bg-gradient-to-br from-purple-100 to-pink-200 dark:from-purple-900 dark:to-pink-800 rounded-xl group-hover:animate-wiggle\">\n              <span class=\"text-3xl\">📚</span>\n            </div>\n            <div class=\"ml-4\">\n              <h3 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors\">${stats.totalEntries} Entries</h3>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Total written 📖</p>\n            </div>\n          </div>\n        </a>\n        \n        <a href=\"/settings\" class=\"stat-card link-subtle\" data-action=\"edit-goal\">\n          <div class=\"flex items-center\">\n            <div class=\"p-3 bg-gradient-to-br from-green-100 to-emerald-200 dark:from-green-900 dark:to-emerald-800 rounded-xl group-hover:animate-bounce-gentle\">\n              <span class=\"text-3xl\">🎯</span>\n            </div>\n            <div class=\"ml-4\">\n              <h3 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors\">${state.user?.preferences.dailyWordTarget || 250} Words</h3>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Today's goal ⚡</p>\n            </div>\n          </div>\n        </a>\n      </div>\n      \n      <!-- Recent Entries -->\n      <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        <div class=\"card\">\n          <h2 class=\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4\">Recent Entries</h2>\n          <div class=\"space-y-4\">\n            ${recentEntries.length > 0 ? \n              recentEntries.map(entry => `\n                <div class=\"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 dark:hover:from-gray-600 dark:hover:to-gray-500 transition-all duration-300 cursor-pointer transform hover:scale-102 hover:-translate-y-1 group\" data-entry-id=\"${entry.id}\">\n                  <div class=\"flex justify-between items-start mb-2\">\n                    <h3 class=\"font-semibold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\n                      ${entry.title}\n                      ${entry.isFavorite ? '<span class=\"ml-1\">⭐</span>' : ''}\n                    </h3>\n                    <div class=\"flex gap-1\">\n                      ${entry.tags.slice(0, 2).map(tag => `\n                        <span class=\"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full\">\n                          ${tag}\n                        </span>\n                      `).join('')}\n                    </div>\n                  </div>\n                  <p class=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                    ${formatRelativeDate(entry.createdAt)}\n                  </p>\n                  <p class=\"text-sm text-gray-600 dark:text-gray-300 mt-2 line-clamp-2\">\n                    ${convertMarkdownToPlainText(entry.content).slice(0, 120)}${entry.content.length > 120 ? '...' : ''}\n                  </p>\n                  <div class=\"flex justify-between items-center mt-2\">\n                    <span class=\"text-xs text-gray-500 dark:text-gray-400\">${entry.wordCount} words</span>\n                  </div>\n                </div>\n              `).join('') \n              : \n              '<div class=\"p-8 text-center\"><p class=\"text-gray-500 dark:text-gray-400\">No entries yet. <a href=\"/write\" class=\"link\">Create your first entry!</a> ✨</p></div>'\n            }\n          </div>\n          \n          <div class=\"mt-4\">\n            <a href=\"/search\" class=\"link text-sm font-medium\">\n              View all entries ✨\n            </a>\n          </div>\n        </div>\n        \n        <!-- Writing Stats -->\n        <div class=\"card\">\n          <h2 class=\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4\">Writing Progress</h2>\n          \n          <!-- Today's Progress -->\n          <div class=\"mb-6\">\n            <div class=\"flex justify-between items-center mb-2\">\n              <span class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Today's Word Count</span>\n              <span class=\"text-sm text-gray-500 dark:text-gray-400\">${todayWordCount} / ${dailyTarget} words</span>\n            </div>\n            <div class=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\n              <div class=\"bg-blue-600 h-2 rounded-full transition-all duration-500\" style=\"width: ${progressPercentage}%\"></div>\n            </div>\n            ${todayWordCount >= dailyTarget ? \n              '<p class=\"text-xs text-green-600 dark:text-green-400 mt-1 font-medium\">🎉 Daily goal achieved!</p>' : \n              todayWordCount > 0 ? \n                `<p class=\"text-xs text-blue-600 dark:text-blue-400 mt-1\">${Math.round(progressPercentage)}% complete</p>` : \n                '<p class=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Start writing to track progress</p>'\n            }\n          </div>\n          \n          <!-- Weekly Stats -->\n          <div class=\"space-y-3\">\n            <div class=\"flex justify-between\">\n              <span class=\"text-sm text-gray-600 dark:text-gray-400\">This week</span>\n              <span class=\"text-sm font-medium text-gray-900 dark:text-gray-100\">${stats.entriesThisWeek} entries</span>\n            </div>\n            \n            <div class=\"flex justify-between\">\n              <span class=\"text-sm text-gray-600 dark:text-gray-400\">This month</span>\n              <span class=\"text-sm font-medium text-gray-900 dark:text-gray-100\">${stats.entriesThisMonth} entries</span>\n            </div>\n            \n            <div class=\"flex justify-between\">\n              <span class=\"text-sm text-gray-600 dark:text-gray-400\">Average words/entry</span>\n              <span class=\"text-sm font-medium text-gray-900 dark:text-gray-100\">${stats.averageWordsPerEntry} words</span>\n            </div>\n            \n            <div class=\"flex justify-between\">\n              <span class=\"text-sm text-gray-600 dark:text-gray-400\">Longest streak</span>\n              <span class=\"text-sm font-medium text-gray-900 dark:text-gray-100\">${stats.longestStreak} days</span>\n            </div>\n          </div>\n          \n          <div class=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600\">\n            <a href=\"/calendar\" class=\"link text-sm font-medium\">\n              View calendar 📅\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n  \n  // Setup event listeners for entry interactions\n  setupDashboardEventListeners()\n}\n\n/**\n * Convert markdown to plain text for previews\n */\nfunction convertMarkdownToPlainText(markdown: string): string {\n  return markdown\n    // Remove headers\n    .replace(/^#{1,6}\\s+(.+)$/gm, '$1')\n    // Remove bold and italic\n    .replace(/\\*\\*(.+?)\\*\\*/g, '$1')\n    .replace(/\\*(.+?)\\*/g, '$1')\n    .replace(/__(.+?)__/g, '$1')\n    .replace(/_(.+?)_/g, '$1')\n    // Remove links\n    .replace(/\\[(.+?)\\]\\(.+?\\)/g, '$1')\n    // Remove code blocks and inline code\n    .replace(/```[\\s\\S]*?```/g, '')\n    .replace(/`(.+?)`/g, '$1')\n    // Remove blockquotes\n    .replace(/^>\\s+(.+)$/gm, '$1')\n    // Remove list markers\n    .replace(/^[\\s]*[-*+]\\s+(.+)$/gm, '$1')\n    .replace(/^[\\s]*\\d+\\.\\s+(.+)$/gm, '$1')\n    // Clean up extra whitespace\n    .replace(/\\n\\s*\\n/g, ' ')\n    .replace(/\\s+/g, ' ')\n    .trim()\n}\n\n/**\n * Format date for relative display\n */\nfunction formatRelativeDate(date: Date | string): string {\n  const entryDate = new Date(date)\n  const now = new Date()\n  const diffMs = now.getTime() - entryDate.getTime()\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n  const diffDays = Math.floor(diffHours / 24)\n  \n  if (diffHours < 1) return 'Just now'\n  if (diffHours < 24) return `${diffHours}h ago`\n  if (diffDays === 1) return 'Yesterday'\n  if (diffDays < 7) return `${diffDays} days ago`\n  \n  return entryDate.toLocaleDateString()\n}\n\n/**\n * Setup dashboard event listeners\n */\nfunction setupDashboardEventListeners(): void {\n  // Entry click handlers\n  document.querySelectorAll('[data-entry-id]').forEach(element => {\n    element.addEventListener('click', (event) => {\n      const entryId = (event.currentTarget as HTMLElement).getAttribute('data-entry-id')\n      if (entryId) {\n        window.dispatchEvent(new CustomEvent('navigate', { \n          detail: { path: `/entry/${entryId}` } \n        }))\n      }\n    })\n  })\n  \n  // Stat card click handlers\n  document.querySelectorAll('[data-action]').forEach(element => {\n    element.addEventListener('click', (event) => {\n      const action = (event.currentTarget as HTMLElement).getAttribute('data-action')\n      \n      switch (action) {\n        case 'view-streak':\n          // TODO: Show streak details modal\n          console.log('Show streak details')\n          break\n        case 'new-entry':\n          window.dispatchEvent(new CustomEvent('navigate', { \n            detail: { path: '/write' } \n          }))\n          break\n        case 'view-entries':\n          window.dispatchEvent(new CustomEvent('navigate', { \n            detail: { path: '/search' } \n          }))\n          break\n        case 'edit-goal':\n          window.dispatchEvent(new CustomEvent('navigate', { \n            detail: { path: '/settings' } \n          }))\n          break\n      }\n    })\n  })\n}\n"],"names":["renderDashboard","mainContent","state","appStore","stats","recentEntries","today","todayWordCount","entry","entryDate","total","dailyTarget","progressPercentage","tag","formatRelativeDate","convertMarkdownToPlainText","setupDashboardEventListeners","markdown","date","diffMs","diffHours","diffDays","element","event","entryId"],"mappings":"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"}